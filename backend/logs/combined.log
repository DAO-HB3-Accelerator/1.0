{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T13:24:08.274Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:24:08.986Z"}
{"level":"info","message":"GET /api/settings/db-settings","timestamp":"2025-06-26T13:24:17.393Z"}
{"level":"info","message":"GET /api/settings/ai-settings/openai","timestamp":"2025-06-26T13:24:20.587Z"}
{"level":"info","message":"GET /api/settings/ai-settings/openai/models","timestamp":"2025-06-26T13:24:20.619Z"}
{"level":"info","message":"GET /api/settings/ai-settings/openai/models","timestamp":"2025-06-26T13:24:21.417Z"}
{"level":"info","message":"GET /api/settings/ai-settings/ollama","timestamp":"2025-06-26T13:24:37.414Z"}
{"level":"info","message":"GET /api/settings/ai-settings/ollama/models","timestamp":"2025-06-26T13:24:37.439Z"}
{"level":"info","message":"GET /api/settings/ai-settings/ollama/models","timestamp":"2025-06-26T13:24:37.499Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:24:51.769Z"}
{"level":"info","message":"GET /api/settings/ai-assistant","timestamp":"2025-06-26T13:24:56.960Z"}
{"level":"info","message":"GET /api/settings/telegram-settings/list","timestamp":"2025-06-26T13:24:56.975Z"}
{"level":"info","message":"GET /api/tables","timestamp":"2025-06-26T13:24:56.981Z"}
{"level":"info","message":"GET /api/settings/ai-assistant-rules","timestamp":"2025-06-26T13:24:56.997Z"}
{"level":"info","message":"GET /api/settings/email-settings/list","timestamp":"2025-06-26T13:24:57.010Z"}
{"level":"info","message":"GET /api/settings/llm-models","timestamp":"2025-06-26T13:24:57.017Z"}
{"level":"info","message":"GET /api/settings/embedding-models","timestamp":"2025-06-26T13:24:57.040Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:25:14.536Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:26:00.872Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:26:19.572Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:27:05.914Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:27:25.566Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.317Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.318Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.318Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.318Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.319Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.319Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.320Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.321Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.322Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.322Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.322Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.323Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.323Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.324Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.324Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.325Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:28:12.325Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:28:27.077Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:28:27.171Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:29:13.242Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:29:35.734Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:30:22.836Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:30:38.561Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:31:24.514Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:31:43.509Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.940Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.940Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.940Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.940Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.941Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.941Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.941Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:33.941Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:32:52.884Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:33:35.453Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:33:35.499Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:33:35.640Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:33:57.804Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:34:40.787Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:35:03.258Z"}
{"level":"info","message":"PUT /api/settings/ai-assistant","timestamp":"2025-06-26T13:35:39.034Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:35:44.544Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.552Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:35:44.642Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.648Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:35:44.706Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.710Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:35:44.733Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.740Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T13:35:44.744Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T13:35:44.744Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:35:44.761Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.769Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:35:44.792Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:35:44.796Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:35:46.168Z"}
{"level":"info","message":"GET /api/settings/ai-assistant","timestamp":"2025-06-26T13:35:46.588Z"}
{"level":"info","message":"GET /api/settings/ai-assistant-rules","timestamp":"2025-06-26T13:35:46.609Z"}
{"level":"info","message":"GET /api/settings/telegram-settings/list","timestamp":"2025-06-26T13:35:46.630Z"}
{"level":"info","message":"GET /api/settings/email-settings/list","timestamp":"2025-06-26T13:35:46.642Z"}
{"level":"info","message":"GET /api/settings/llm-models","timestamp":"2025-06-26T13:35:46.674Z"}
{"level":"info","message":"GET /api/tables","timestamp":"2025-06-26T13:35:46.681Z"}
{"level":"info","message":"GET /api/settings/embedding-models","timestamp":"2025-06-26T13:35:46.685Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T13:35:57.453Z"}
{"level":"info","message":"GET /api/tables?_t=1750944959241","timestamp":"2025-06-26T13:35:59.584Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:01.563Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T13:36:01.610Z"}
{"level":"info","message":"POST /api/tables/28/rows","timestamp":"2025-06-26T13:36:04.669Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:04.689Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:36:04.844Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:13.564Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:13.597Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:16.749Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:16.784Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:36:19.975Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:36:19.979Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:20.410Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:20.437Z"}
{"level":"info","message":"POST /api/tables/28/rows","timestamp":"2025-06-26T13:36:25.314Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:25.339Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:25.365Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:25.391Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:30.940Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:30.965Z"}
{"level":"info","message":"POST /api/tables/cell","timestamp":"2025-06-26T13:36:39.115Z"}
{"level":"info","message":"GET /api/tables/28","timestamp":"2025-06-26T13:36:39.140Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:36:48.451Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:36:48.552Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:36:48.555Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.148Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.149Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.149Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.149Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.149Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.149Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.150Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:11.150Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:37:19.261Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:37:19.265Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:37:49.497Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:37:49.500Z"}
{"level":"info","message":"GET /api/tables?_t=1750945074758","timestamp":"2025-06-26T13:37:56.446Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:37:57.164Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T13:37:57.954Z"}
{"level":"info","message":"GET /api/settings/ai-assistant","timestamp":"2025-06-26T13:38:08.919Z"}
{"level":"info","message":"GET /api/settings/embedding-models","timestamp":"2025-06-26T13:38:08.962Z"}
{"level":"info","message":"GET /api/tables","timestamp":"2025-06-26T13:38:08.989Z"}
{"level":"info","message":"GET /api/settings/telegram-settings/list","timestamp":"2025-06-26T13:38:08.994Z"}
{"level":"info","message":"GET /api/settings/ai-assistant-rules","timestamp":"2025-06-26T13:38:08.999Z"}
{"level":"info","message":"GET /api/settings/email-settings/list","timestamp":"2025-06-26T13:38:09.008Z"}
{"level":"info","message":"GET /api/settings/llm-models","timestamp":"2025-06-26T13:38:09.026Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:38:15.387Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:38:15.442Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:38:15.506Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:19.162Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:19.167Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:38:26.291Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.293Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:26.374Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.376Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:38:26.408Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.411Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T13:38:26.453Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T13:38:26.456Z"}
{"level":"info","message":"GET /api/settings/ai-assistant","timestamp":"2025-06-26T13:38:26.465Z"}
{"level":"info","message":"GET /api/settings/telegram-settings/list","timestamp":"2025-06-26T13:38:26.501Z"}
{"level":"info","message":"GET /api/settings/embedding-models","timestamp":"2025-06-26T13:38:26.530Z"}
{"level":"info","message":"GET /api/settings/llm-models","timestamp":"2025-06-26T13:38:26.532Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:26.559Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.564Z"}
{"level":"info","message":"GET /api/tables","timestamp":"2025-06-26T13:38:26.571Z"}
{"level":"info","message":"GET /api/settings/email-settings/list","timestamp":"2025-06-26T13:38:26.574Z"}
{"level":"info","message":"GET /api/settings/ai-assistant-rules","timestamp":"2025-06-26T13:38:26.581Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:26.591Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.599Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:26.621Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:26.626Z"}
{"level":"info","message":"PUT /api/settings/ai-assistant","timestamp":"2025-06-26T13:38:32.820Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:38:56.861Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:38:56.867Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:38:58.548Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:39:17.118Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:39:27.077Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:39:27.082Z"}
{"level":"info","message":"GET /api/settings/ai-assistant","timestamp":"2025-06-26T13:39:49.417Z"}
{"level":"info","message":"GET /api/tables","timestamp":"2025-06-26T13:39:49.422Z"}
{"level":"info","message":"GET /api/settings/ai-assistant-rules","timestamp":"2025-06-26T13:39:49.439Z"}
{"level":"info","message":"GET /api/settings/telegram-settings/list","timestamp":"2025-06-26T13:39:49.471Z"}
{"level":"info","message":"GET /api/settings/email-settings/list","timestamp":"2025-06-26T13:39:49.479Z"}
{"level":"info","message":"GET /api/settings/llm-models","timestamp":"2025-06-26T13:39:49.500Z"}
{"level":"info","message":"GET /api/settings/embedding-models","timestamp":"2025-06-26T13:39:49.504Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:39:57.597Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:39:57.601Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:40:03.942Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:40:26.214Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:40:27.857Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:40:27.861Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:40:58.141Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:40:58.183Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:41:09.707Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:41:28.313Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:41:28.317Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.142Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.142Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.142Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.143Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.143Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.143Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:41:32.144Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:42:14.174Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:42:14.218Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:42:33.432Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:42:54.449Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:42:54.454Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:43:20.295Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:43:42.335Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:43:54.891Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:43:54.896Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:44:29.247Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:44:47.695Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:44:55.356Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:44:55.360Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:45:31.817Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:45:49.833Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:45:55.799Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:45:55.804Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:46:39.979Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:46:56.236Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:46:56.240Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:46:58.657Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:47:46.576Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:47:53.096Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:47:53.099Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:48:06.555Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:48:47.781Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:48:54.375Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:48:54.378Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:49:09.645Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:49:52.973Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:49:54.874Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:49:54.879Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:50:15.434Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:50:55.341Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:50:55.347Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.183Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.184Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.185Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.185Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.189Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:02.189Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T13:51:21.375Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:51:28.525Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:51:28.530Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T13:51:40.796Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T13:51:45.901Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T13:51:45.940Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T13:51:46.053Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T13:51:46.100Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T13:51:46.113Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T13:51:46.144Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T13:51:49.538Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T13:51:49.548Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T13:51:49.549Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T13:51:49.551Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T13:51:49.552Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T13:51:49.553Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T13:51:49.677Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T13:51:49.694Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T13:51:49.755Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T13:51:49.757Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T13:51:50.761Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T13:51:50.764Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:51:51.528Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:51:57.607Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:51:57.613Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:52:27.830Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:52:27.835Z"}
{"level":"info","message":"POST /api/chat/guest-message","timestamp":"2025-06-26T13:52:36.982Z"}
{"level":"info","message":"Received /guest-message request","timestamp":"2025-06-26T13:52:36.985Z"}
{"file":null,"guestId":"1750943864658-dttqecesj","level":"info","message":"Saving guest message: вопрос 1","mimetype":null,"size":null,"timestamp":"2025-06-26T13:52:36.986Z"}
{"level":"info","message":"Guest message saved with ID:","timestamp":"2025-06-26T13:52:36.991Z"}
{"level":"info","message":"Session saved after guest message","timestamp":"2025-06-26T13:52:36.995Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T13:52:39.556Z"}
{"level":"info","message":"Nonce 79fe8426e3f3d1896747ce54c7bdc3cf сохранен для адреса 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T13:52:39.564Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T13:52:42.202Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T13:52:42.204Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:42.322Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:43.178Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T13:52:43.353Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:43.435Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T13:52:43.673Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:43.712Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:43.713Z"}
{"level":"info","message":"New user 139 role check result: user","timestamp":"2025-06-26T13:52:43.713Z"}
{"level":"info","message":"[verify] Found or created user 139 for wallet 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:43.713Z"}
{"level":"info","message":"[IdentityService] Converting guest identity for user 139 to guest_user_mapping: 1750943864658-dttqecesj","timestamp":"2025-06-26T13:52:43.714Z"}
{"level":"info","message":"Checking admin tokens for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:43.723Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:43.723Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:43.979Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:44.021Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T13:52:44.096Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T13:52:44.098Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T13:52:44.131Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:52:44.132Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T13:17:48.029Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750943864658-dttqecesj","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","timestamp":"2025-06-26T13:52:44.135Z","userId":139}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T13:52:44.144Z"}
{"level":"info","message":"[linkGuestMessages] Starting for user 139 with guestId=1750943864658-dttqecesj, previousGuestId=undefined","timestamp":"2025-06-26T13:52:44.145Z"}
{"level":"info","message":"[processGuestMessagesWrapper] Processing messages: userId=139, guestId=1750943864658-dttqecesj","timestamp":"2025-06-26T13:52:44.151Z"}
{"level":"info","message":"Processing guest messages for user 139 with guest ID 1750943864658-dttqecesj","timestamp":"2025-06-26T13:52:44.152Z"}
{"level":"info","message":"Found 1 guest messages for guest ID 1750943864658-dttqecesj","timestamp":"2025-06-26T13:52:44.158Z"}
{"level":"info","message":"Created new conversation 22 for guest messages","timestamp":"2025-06-26T13:52:44.172Z"}
{"level":"info","message":"Processing guest message ID 13: вопрос 1","timestamp":"2025-06-26T13:52:44.172Z"}
{"level":"info","message":"Saved user message with ID 622","timestamp":"2025-06-26T13:52:44.180Z"}
{"level":"info","message":"Getting AI response for guest message:","timestamp":"2025-06-26T13:52:44.198Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:52:57.467Z"}
{"conversationId":22,"level":"info","message":"AI response for guest message received","timestamp":"2025-06-26T13:53:13.807Z"}
{"conversationId":22,"level":"info","message":"AI response for guest message saved","timestamp":"2025-06-26T13:53:13.861Z"}
{"level":"info","message":"Deleted 1 processed guest messages for guest ID 1750943864658-dttqecesj","timestamp":"2025-06-26T13:53:13.865Z"}
{"level":"info","message":"Marked guest mapping as processed for guest ID 1750943864658-dttqecesj","timestamp":"2025-06-26T13:53:13.870Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T13:17:48.029Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750943864658-dttqecesj","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","processedGuestIds":["1750943864658-dttqecesj"],"timestamp":"2025-06-26T13:53:13.873Z","userId":139}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T13:53:13.879Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:53:13.894Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:13.899Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:13.922Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:13.927Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T13:53:13.948Z"}
{"level":"info","message":"Processing guest messages for user 139 with guest ID 1750943864658-dttqecesj","timestamp":"2025-06-26T13:53:13.951Z"}
{"level":"info","message":"Guest messages for guest ID 1750943864658-dttqecesj were already processed.","timestamp":"2025-06-26T13:53:13.956Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:53:14.000Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:53:14.003Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:53:14.004Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.006Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:14.028Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.037Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:14.053Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.056Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:14.071Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.074Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T13:53:14.092Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.094Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:14.110Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.112Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:14.128Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:14.131Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T13:53:15.475Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T13:53:15.492Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 139","offset":0,"timestamp":"2025-06-26T13:53:15.500Z","total":2}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:53:18.419Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T13:53:18.420Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T13:53:23.677Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T13:53:23.696Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 139","offset":0,"timestamp":"2025-06-26T13:53:23.703Z","total":2}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:28.300Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:53:28.309Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:44.781Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:53:44.787Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:53:58.527Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:53:58.533Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:54:02.903Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:54:15.040Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:54:15.045Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T13:54:24.053Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T13:54:24.072Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T13:54:24.073Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T13:54:24.075Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T13:54:24.076Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T13:54:24.077Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T13:54:24.214Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T13:54:24.235Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T13:54:24.295Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T13:54:24.298Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T13:54:25.439Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T13:54:25.441Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:54:28.732Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:54:28.741Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:54:33.209Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:54:44.745Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:54:44.750Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T13:54:53.065Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T13:54:53.073Z"}
{"conversationId":22,"level":"info","message":"User message saved","messageId":624,"timestamp":"2025-06-26T13:54:53.102Z"}
{"level":"error","message":"Error getting or saving AI response (RAG): Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory","stack":"Error: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory\n    at HNSWLib.imports (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:271:19)\n    at async HNSWLib.getHierarchicalNSW (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:54:37)\n    at async HNSWLib.initIndex (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:68:26)\n    at async HNSWLib.addVectors (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:95:9)\n    at async HNSWLib.fromDocuments (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:261:9)\n    at async ragAnswer (/app/services/ragService.js:96:23)\n    at async /app/routes/chat.js:452:29","timestamp":"2025-06-26T13:54:57.511Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:55:15.455Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:55:15.464Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:55:27.377Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:55:27.382Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:55:34.832Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:55:45.730Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:55:45.735Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:56:15.938Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:56:15.943Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:56:28.778Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:56:28.782Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:56:39.619Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:56:48.909Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:56:48.914Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:57:30.087Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T13:57:30.093Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T13:57:45.817Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T13:57:50.224Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T13:57:50.229Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:06:19.354Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:06:19.358Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:06:19.358Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:06:19.360Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:06:19.360Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:06:19.361Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:06:19.470Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:06:19.479Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:06:19.528Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:06:19.529Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:06:20.779Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:06:20.781Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:06:22.822Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:06:53.502Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:06:53.505Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:06:53.506Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:06:53.508Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:06:53.509Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:06:53.510Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:06:53.604Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:06:53.621Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:06:53.692Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:06:53.694Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:06:54.905Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:06:54.908Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:06:56.220Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:06:57.295Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:06:57.316Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:07:01.528Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:01.536Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:01.600Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:01.606Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:07:01.644Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:01.651Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T14:07:01.684Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T14:07:01.685Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T14:07:01.880Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T14:07:01.899Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:01.968Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:01.973Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:07:01.983Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:01.995Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:02.000Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:07:02.012Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T14:07:02.028Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T14:07:02.054Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:02.065Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:02.070Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:07:06.514Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.516Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:06.671Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.673Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T14:07:06.716Z"}
{"level":"info","message":"Processing guest messages for user 139 with guest ID 1750946823417-7eno1iamx","timestamp":"2025-06-26T14:07:06.718Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:07:06.728Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.730Z"}
{"level":"info","message":"Created mapping for guest ID 1750946823417-7eno1iamx to user 139","timestamp":"2025-06-26T14:07:06.744Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:06.748Z"}
{"level":"info","message":"No guest messages found for guest ID 1750946823417-7eno1iamx","timestamp":"2025-06-26T14:07:06.753Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.755Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:07:06.765Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:07:06.765Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750946823417-7eno1iamx","timestamp":"2025-06-26T14:07:06.767Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:06.779Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.784Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:06.803Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:06.805Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T14:07:08.187Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T14:07:08.211Z"}
{"count":3,"level":"info","limit":30,"message":"Returning message history for user 139","offset":0,"timestamp":"2025-06-26T14:07:08.217Z","total":3}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T14:07:22.717Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T14:07:22.720Z"}
{"conversationId":22,"level":"info","message":"User message saved","messageId":625,"timestamp":"2025-06-26T14:07:22.758Z"}
{"level":"error","message":"Error getting or saving AI response (RAG): Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory","stack":"Error: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory\n    at HNSWLib.imports (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:271:19)\n    at async HNSWLib.getHierarchicalNSW (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:54:37)\n    at async HNSWLib.initIndex (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:68:26)\n    at async HNSWLib.addVectors (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:95:9)\n    at async HNSWLib.fromDocuments (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:261:9)\n    at async ragAnswer (/app/services/ragService.js:96:23)\n    at async /app/routes/chat.js:452:29","timestamp":"2025-06-26T14:07:25.649Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:30.124Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:07:30.128Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:07:37.407Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:07:37.410Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:08:00.343Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:08:00.349Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:08:01.530Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:08:07.643Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:08:07.646Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:08:30.589Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:08:30.594Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:08:35.165Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:08:35.172Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:09:00.791Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:09:00.796Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:09:05.485Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:09:05.489Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:09:13.375Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:09:31.047Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:09:31.053Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:09:35.626Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:09:35.630Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:10:02.604Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:10:02.625Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:10:07.230Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:10:07.234Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:10:17.845Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:10:39.653Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:10:39.668Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:10:55.991Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:10:56.000Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:11:12.379Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:11:38.781Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:11:38.788Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:11:56.816Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:11:56.823Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:12:14.977Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:12:37.893Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:12:37.909Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:12:56.217Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:12:56.226Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:13:25.480Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:13:39.526Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:13:39.535Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:13:57.064Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:13:57.071Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:21:07.951Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:21:07.956Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:21:07.957Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:21:07.959Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:21:07.959Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:21:07.960Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:21:08.038Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:21:08.049Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:21:08.102Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:21:08.103Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:21:08.687Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:21:08.688Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T14:21:13.900Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T14:21:13.901Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:21:13.902Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T14:21:23.908Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:21:24.461Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:21:24.464Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:21:25.140Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:21:44.440Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:21:44.444Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:21:44.445Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:21:44.446Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:21:44.446Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:21:44.447Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:21:44.489Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:21:44.501Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:21:44.550Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:21:44.551Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:21:45.125Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:21:45.127Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:21:45.795Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:51.441Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.460Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T14:21:51.618Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T14:21:51.655Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:51.699Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.709Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:21:51.716Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:51.739Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.741Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T14:21:51.751Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T14:21:51.752Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T14:21:51.791Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T14:21:51.818Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:21:51.824Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:51.836Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.842Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:51.867Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.869Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:51.886Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:21:51.890Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:53.507Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.511Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:53.553Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.560Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T14:21:53.597Z"}
{"level":"info","message":"Processing guest messages for user 139 with guest ID 1750947711620-tk715ze5u","timestamp":"2025-06-26T14:21:53.599Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:53.620Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.626Z"}
{"level":"info","message":"Created mapping for guest ID 1750947711620-tk715ze5u to user 139","timestamp":"2025-06-26T14:21:53.628Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:21:53.633Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:21:53.634Z"}
{"level":"info","message":"No guest messages found for guest ID 1750947711620-tk715ze5u","timestamp":"2025-06-26T14:21:53.639Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750947711620-tk715ze5u","timestamp":"2025-06-26T14:21:53.652Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:53.658Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.665Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:53.693Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.700Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:21:53.737Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 139","timestamp":"2025-06-26T14:21:53.741Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T14:21:55.065Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T14:21:55.102Z"}
{"count":4,"level":"info","limit":30,"message":"Returning message history for user 139","offset":0,"timestamp":"2025-06-26T14:21:55.112Z","total":4}
{"level":"info","message":"POST /api/auth/logout","timestamp":"2025-06-26T14:21:57.673Z"}
{"address":null,"authType":null,"authenticated":false,"cookie":{"expires":"2025-07-26T13:17:48.029Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"email":null,"guestId":null,"isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","pendingEmail":null,"previousGuestId":null,"processedGuestIds":[],"telegramId":null,"timestamp":"2025-06-26T14:21:57.675Z","userId":null}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T14:21:57.678Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:57.692Z"}
{"cookie":{"expires":"2025-07-26T14:21:57.690Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"69ebb8d9d2445a01700659cfa1f6d30e","level":"info","message":"[SessionService] Saving session data:","timestamp":"2025-06-26T14:21:57.693Z"}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T14:21:57.698Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T14:21:57.716Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T14:21:57.746Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:21:58.102Z"}
{"level":"info","message":"POST /api/users/mark-contact-read","timestamp":"2025-06-26T14:22:01.517Z"}
{"level":"info","message":"POST /api/messages/mark-read","timestamp":"2025-06-26T14:22:01.540Z"}
{"level":"info","message":"GET /api/users/139","timestamp":"2025-06-26T14:22:01.660Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:22:01.663Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:22:01.667Z"}
{"level":"info","message":"GET /api/messages/conversations?userId=139","timestamp":"2025-06-26T14:22:01.695Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:01.706Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:22:01.709Z"}
{"level":"info","message":"GET /api/messages?conversationId=22","timestamp":"2025-06-26T14:22:01.721Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:01.728Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T14:22:01.732Z"}
{"level":"info","message":"GET /api/users/139/tags","timestamp":"2025-06-26T14:22:01.767Z"}
{"level":"info","message":"GET /api/users/139","timestamp":"2025-06-26T14:22:03.681Z"}
{"level":"info","message":"DELETE /api/users/139","timestamp":"2025-06-26T14:22:07.704Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T14:22:07.920Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T14:22:11.457Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T14:22:11.471Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:22:11.519Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T14:22:11.542Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:22:11.562Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T14:22:11.575Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T14:22:13.260Z"}
{"level":"info","message":"POST /api/chat/guest-message","timestamp":"2025-06-26T14:22:26.346Z"}
{"level":"info","message":"Received /guest-message request","timestamp":"2025-06-26T14:22:26.348Z"}
{"file":null,"guestId":"1750947716643-f5gf3dywi","level":"info","message":"Saving guest message: Вопрос 1","mimetype":null,"size":null,"timestamp":"2025-06-26T14:22:26.349Z"}
{"level":"info","message":"Guest message saved with ID:","timestamp":"2025-06-26T14:22:26.355Z"}
{"level":"info","message":"Session saved after guest message","timestamp":"2025-06-26T14:22:26.358Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T14:22:29.242Z"}
{"level":"info","message":"Nonce 2ce7372b42682898b835c5201f4b6454 сохранен для адреса 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T14:22:29.249Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T14:22:31.901Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T14:22:31.902Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:32.000Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:32.520Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:32.757Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T14:22:32.773Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:32.785Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T14:22:32.917Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:32.917Z"}
{"level":"info","message":"New user 140 role check result: user","timestamp":"2025-06-26T14:22:32.917Z"}
{"level":"info","message":"[verify] Found or created user 140 for wallet 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:32.918Z"}
{"level":"info","message":"[IdentityService] Converting guest identity for user 140 to guest_user_mapping: 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:32.919Z"}
{"level":"info","message":"Checking admin tokens for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:32.924Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:32.924Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T14:22:32.946Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:33.143Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:33.196Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T14:22:33.299Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T14:22:33.321Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T14:22:33.323Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:33.324Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T14:21:57.690Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750947716643-f5gf3dywi","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","timestamp":"2025-06-26T14:22:33.326Z","userId":140}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T14:22:33.329Z"}
{"level":"info","message":"[linkGuestMessages] Starting for user 140 with guestId=1750947716643-f5gf3dywi, previousGuestId=undefined","timestamp":"2025-06-26T14:22:33.329Z"}
{"level":"info","message":"[processGuestMessagesWrapper] Processing messages: userId=140, guestId=1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:33.334Z"}
{"level":"info","message":"Processing guest messages for user 140 with guest ID 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:33.335Z"}
{"level":"info","message":"Found 1 guest messages for guest ID 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:33.339Z"}
{"level":"info","message":"Created new conversation 23 for guest messages","timestamp":"2025-06-26T14:22:33.347Z"}
{"level":"info","message":"Processing guest message ID 14: Вопрос 1","timestamp":"2025-06-26T14:22:33.347Z"}
{"level":"info","message":"Saved user message with ID 626","timestamp":"2025-06-26T14:22:33.356Z"}
{"level":"info","message":"Getting AI response for guest message:","timestamp":"2025-06-26T14:22:33.363Z"}
{"conversationId":23,"level":"info","message":"AI response for guest message received","timestamp":"2025-06-26T14:22:52.514Z"}
{"conversationId":23,"level":"info","message":"AI response for guest message saved","timestamp":"2025-06-26T14:22:52.572Z"}
{"level":"info","message":"Deleted 1 processed guest messages for guest ID 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:52.577Z"}
{"level":"info","message":"Marked guest mapping as processed for guest ID 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:52.581Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T14:21:57.690Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750947716643-f5gf3dywi","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","processedGuestIds":["1750947716643-f5gf3dywi"],"timestamp":"2025-06-26T14:22:52.583Z","userId":140}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T14:22:52.586Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:22:52.598Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.601Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.620Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.622Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T14:22:52.647Z"}
{"level":"info","message":"Processing guest messages for user 140 with guest ID 1750947716643-f5gf3dywi","timestamp":"2025-06-26T14:22:52.651Z"}
{"level":"info","message":"Guest messages for guest ID 1750947716643-f5gf3dywi were already processed.","timestamp":"2025-06-26T14:22:52.658Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:52.692Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:52.693Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:22:52.696Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.707Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.725Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.727Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.748Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.750Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.766Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.769Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T14:22:52.785Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.787Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.800Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.802Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:22:52.816Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:22:52.819Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T14:22:54.604Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T14:22:54.625Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 140","offset":0,"timestamp":"2025-06-26T14:22:54.633Z","total":2}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:22:54.896Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:55.580Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T14:22:55.581Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T14:22:58.107Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T14:22:58.121Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 140","offset":0,"timestamp":"2025-06-26T14:22:58.124Z","total":2}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:23:23.778Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:23:23.782Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:23:54.002Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:23:54.007Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:23:56.615Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:24:23.778Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:24:23.790Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:24:23.791Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:24:23.793Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:24:23.793Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:24:23.794Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:24:23.894Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:24:23.913Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:24:23.967Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:24:23.968Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:24:24.231Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:24:24.237Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:24:24.476Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:24:24.479Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:24:25.029Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:24:27.316Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:24:27.318Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:24:27.319Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:24:27.320Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:24:27.320Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:24:27.321Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:24:27.354Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:24:27.364Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:24:27.400Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:24:27.402Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:24:31.682Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:24:31.684Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:24:32.336Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:24:54.449Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:24:54.455Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:25:24.666Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:25:24.672Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:25:37.728Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:25:52.184Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:25:52.190Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:26:31.537Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:26:31.540Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T14:26:34.955Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T14:26:34.959Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T14:26:34.960Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T14:26:34.962Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T14:26:34.962Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T14:26:34.964Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T14:26:35.044Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T14:26:35.066Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T14:26:35.112Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T14:26:35.114Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T14:26:40.393Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T14:26:40.394Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T14:26:50.401Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:26:50.923Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:26:50.925Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:26:51.506Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:26:54.568Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:26:54.574Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T14:27:03.728Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T14:27:03.731Z"}
{"conversationId":23,"level":"info","message":"User message saved","messageId":628,"timestamp":"2025-06-26T14:27:03.747Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"Вопрос 2\"","timestamp":"2025-06-26T14:27:03.756Z"}
{"level":"error","message":"Error getting or saving AI response (RAG): Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory","stack":"Error: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory\n    at HNSWLib.imports (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:304:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async HNSWLib.getHierarchicalNSW (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:87:37)\n    at async HNSWLib.initIndex (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:101:26)\n    at async HNSWLib.addVectors (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:128:9)\n    at async HNSWLib.fromDocuments (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:294:9)\n    at async ragAnswer (/app/services/ragService.js:96:23)\n    at async /app/routes/chat.js:454:29","timestamp":"2025-06-26T14:27:07.887Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:27:22.855Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:27:22.859Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:27:53.079Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:27:53.083Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:27:57.022Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:28:55.363Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:28:55.367Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:29:06.134Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:29:55.799Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:29:55.802Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:30:07.809Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:30:56.269Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:30:56.273Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:31:13.281Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:31:56.703Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:31:56.706Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.308Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T14:32:23.308Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.309Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.309Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.309Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.309Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.310Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:23.310Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T14:32:36.026Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T14:32:41.223Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:32:54.443Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:32:54.448Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:33:28.727Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:33:55.002Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:33:55.005Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T14:34:33.254Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T14:34:33.255Z"}
{"level":"error","message":"Uncaught Exception: Not authenticated","stack":"Error: Not authenticated\n    at Connection.openBox (/app/node_modules/imap/lib/Connection.js:409:11)\n    at Connection.<anonymous> (/app/services/emailBot.js:105:19)\n    at Object.onceWrapper (node:events:638:28)\n    at Connection.emit (node:events:536:35)\n    at Connection.<anonymous> (/app/node_modules/imap/lib/Connection.js:1623:12)\n    at Connection._resTagged (/app/node_modules/imap/lib/Connection.js:1535:22)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:194:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resTagged (/app/node_modules/imap/lib/Parser.js:175:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:139:16)","timestamp":"2025-06-26T14:34:33.262Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:34:34.016Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:34:34.063Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:34:55.345Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:34:55.349Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:35:35.046Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:35:46.644Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:35:46.644Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:35:46.644Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:35:46.645Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:35:55.874Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:35:55.878Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:36:44.793Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:36:44.833Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:36:44.873Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:36:45.112Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:36:45.113Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:36:56.242Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:36:56.247Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:37:45.974Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:37:50.229Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:37:56.699Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:37:56.705Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:38:51.398Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:38:54.497Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:38:54.500Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:38:55.693Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:39:54.878Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:39:54.881Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.438Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.439Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.439Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.439Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.439Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:40:01.440Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:40:55.337Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:40:55.342Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:41:13.793Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:41:13.794Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:41:55.810Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:41:55.814Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:07.928Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:07.974Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:08.021Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:08.068Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:08.116Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T14:42:11.987Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:42:56.277Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:42:56.280Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:43:17.694Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:43:17.695Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:43:17.695Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:43:17.695Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T14:43:56.729Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 140","timestamp":"2025-06-26T14:43:56.732Z"}
{"level":"error","message":"Uncaught Exception: Cannot read properties of undefined (reading 'type')","stack":"TypeError: Cannot read properties of undefined (reading 'type')\n    at Connection._resUntagged (/app/node_modules/imap/lib/Connection.js:1265:52)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:191:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resUntagged (/app/node_modules/imap/lib/Parser.js:271:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:137:16)\n    at Parser._tryread (/app/node_modules/imap/lib/Parser.js:82:15)\n    at Parser._cbReadable (/app/node_modules/imap/lib/Parser.js:53:12)\n    at TLSSocket.emit (node:events:524:28)\n    at emitReadable_ (node:internal/streams/readable:834:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2025-06-26T14:44:22.176Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:44:30.100Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T14:44:30.101Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T16:18:56.230Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T16:18:56.233Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T16:18:56.234Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T16:18:56.236Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T16:18:56.236Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T16:18:56.238Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T16:18:56.339Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T16:18:56.351Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T16:18:56.417Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T16:18:56.419Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:19:03.221Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T16:19:03.222Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T16:19:13.229Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:19:14.079Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:19:14.083Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:19:15.166Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T16:20:24.115Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T16:20:24.127Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T16:20:24.132Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T16:20:24.135Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T16:20:24.136Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T16:20:24.138Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T16:20:24.301Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T16:20:24.371Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T16:20:24.528Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T16:20:24.531Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:20:25.715Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:20:25.720Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:20:30.792Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xF45aa4917b3775bA37f48Aeb3dc1a943561e9e0B","timestamp":"2025-06-26T16:21:30.051Z"}
{"level":"info","message":"Nonce d8fc76833d98c5163e865c92f78f3ee8 сохранен для адреса 0xF45aa4917b3775bA37f48Aeb3dc1a943561e9e0B","timestamp":"2025-06-26T16:21:30.075Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:21:36.019Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T16:21:37.620Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xF45aa4917b3775bA37f48Aeb3dc1a943561e9e0B","timestamp":"2025-06-26T16:21:37.625Z"}
{"level":"info","message":"[verify] Using existing authenticated user 1 for wallet 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:37.857Z"}
{"level":"info","message":"[AuthService] Linking identity wallet:0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b to user 1","timestamp":"2025-06-26T16:21:37.859Z"}
{"level":"info","message":"[AuthService] Identity wallet:0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b already exists for user 1","timestamp":"2025-06-26T16:21:37.877Z"}
{"level":"info","message":"[verify] Wallet 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b linked to user 1: already exists","timestamp":"2025-06-26T16:21:37.878Z"}
{"level":"info","message":"[IdentityService] Converting guest identity for user 1 to guest_user_mapping: d8708a72dd00581774cd3d3669962afd","timestamp":"2025-06-26T16:21:37.879Z"}
{"level":"info","message":"Checking admin tokens for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:37.896Z"}
{"level":"info","message":"Checking admin role for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:37.896Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","balance":"454852.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":true,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:21:38.885Z"}
{"level":"info","message":"Found admin tokens on polygon","timestamp":"2025-06-26T16:21:38.886Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","balance":"499999.9","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":true,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T16:21:39.103Z"}
{"level":"info","message":"Found admin tokens on arbitrum","timestamp":"2025-06-26T16:21:39.104Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","balance":"1500000.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":true,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:21:39.155Z"}
{"level":"info","message":"Found admin tokens on ethereum","timestamp":"2025-06-26T16:21:39.156Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","balance":"500000.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":true,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:21:39.439Z"}
{"level":"info","message":"Found admin tokens on bsc","timestamp":"2025-06-26T16:21:39.440Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","balance":"110.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":true,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T16:21:39.630Z"}
{"level":"info","message":"Found admin tokens on sepolia","timestamp":"2025-06-26T16:21:39.631Z"}
{"balances":{"arbitrum":"499999.9","bsc":"500000.0","ethereum":"1500000.0","polygon":"454852.0","sepolia":"110.0"},"level":"info","message":"Admin role summary for 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b:","networks":["polygon","arbitrum","ethereum","bsc","sepolia"],"timestamp":"2025-06-26T16:21:39.632Z"}
{"level":"info","message":"Admin role granted for 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:39.632Z"}
{"level":"info","message":"Updated user 1 role to admin based on token holdings","timestamp":"2025-06-26T16:21:39.661Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T13:14:14.655Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"d8708a72dd00581774cd3d3669962afd","isAdmin":true,"level":"info","message":"[SessionService] Saving session data:","processedGuestIds":["d8708a72dd00581774cd3d3669962afd","015dd716a2fded1fc045c72c1a60575e","1750836891567-oqvkw626f","9f076c84ee0fb82e662195c7008d3cdd","1749051277025-x5jj8ymr3","1750248718038-bupg3zyvb","1750335451213-yitdeo8jv","43688588ddbdd3d97d95044707e01deb","1749047037557-ffbhn7w2e","1749047450809-2v3599neb","1749197693965-cumdt5ym3","1750414678688-i9z0kljkk","0a99fc1abc598f50aa7f9bb4ad0ed58f","1749199741958-wplc2viy5","1749215605031-e36tfrsg7","1749219734273-z8cjo614o","1750871992168-b7ljnr7fi","e3f276c739780f7f79e50905cb900155","468571bcf6944db390ebc215dedd3a55","1750915517060-2lf6nr65o","1750921637490-rkuee3750","836ef0c256afc6fe709014bea3d5e6ad","1750923656929-lbdstodh2","1750923703304-tf2lyglz8","1750923890061-3wcksdpjn","1750923927890-zrzidz9fz","f845253ebf432c9e990e460bbf8d6d51","fc7552c52eaee0ffc8787ad6d34a072c","75985e555769b03f5dc6e279a1155bc7","1750852072111-ojhw60q6y","f9b7b943a81ea4ba7eee39a6f7fc9669","fa3ab057f8e1f3ee3d5e34ef07b26059","d4f09e790d0a9952bcfda6d839fb50bf","1749036910052-j7dxek19b","1748976356629-5bgeyaaf1","1748973405272-q3zeztpki","999d65f7f770da796f88c8cbd3664f55","f847e3846984359dd853b3164ae2dee4","1750422829327-pz30oiqdx","1750770422364-iftjkyerp","0c8585859a567c3b2c67e877823f04e9","1750770941508-5f1wol4qg","1750770963924-f361ylu3o","7c737e9edc4b4f8df98af1cd19f6fe31","c468d847f518642666898a1c7a7d9c15","1750772552636-bxl1slj9a","1750772667419-ki0n6un0c","1748971995627-i4wduj6v0","1748971772605-2176ii4p8","a329b8732cc9083fdb55894a2d1814f7","5d3fa01a03251b27ec7c9d3683957fe1","1750416593902-e298ho4si","c669dd30c7c2f8f2bef3e71e48852bf3","cf443b86b4dcfd92f235965d83483763","1749215412677-039rqj55c","1750355588881-80dk1w9pa"],"timestamp":"2025-06-26T16:21:39.666Z","userId":1}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T16:21:39.674Z"}
{"level":"info","message":"[linkGuestMessages] Starting for user 1 with guestId=d8708a72dd00581774cd3d3669962afd, previousGuestId=undefined","timestamp":"2025-06-26T16:21:39.676Z"}
{"level":"info","message":"[processGuestMessagesWrapper] Processing messages: userId=1, guestId=1750943651026-x1h1p2uu6","timestamp":"2025-06-26T16:21:39.685Z"}
{"level":"info","message":"Processing guest messages for user 1 with guest ID 1750943651026-x1h1p2uu6","timestamp":"2025-06-26T16:21:39.687Z"}
{"level":"info","message":"Guest messages for guest ID 1750943651026-x1h1p2uu6 were already processed.","timestamp":"2025-06-26T16:21:39.690Z"}
{"address":"0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T13:14:14.655Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"d8708a72dd00581774cd3d3669962afd","isAdmin":true,"level":"info","message":"[SessionService] Saving session data:","processedGuestIds":["d8708a72dd00581774cd3d3669962afd","015dd716a2fded1fc045c72c1a60575e","1750836891567-oqvkw626f","9f076c84ee0fb82e662195c7008d3cdd","1749051277025-x5jj8ymr3","1750248718038-bupg3zyvb","1750335451213-yitdeo8jv","43688588ddbdd3d97d95044707e01deb","1749047037557-ffbhn7w2e","1749047450809-2v3599neb","1749197693965-cumdt5ym3","1750414678688-i9z0kljkk","0a99fc1abc598f50aa7f9bb4ad0ed58f","1749199741958-wplc2viy5","1749215605031-e36tfrsg7","1749219734273-z8cjo614o","1750871992168-b7ljnr7fi","e3f276c739780f7f79e50905cb900155","468571bcf6944db390ebc215dedd3a55","1750915517060-2lf6nr65o","1750921637490-rkuee3750","836ef0c256afc6fe709014bea3d5e6ad","1750923656929-lbdstodh2","1750923703304-tf2lyglz8","1750923890061-3wcksdpjn","1750923927890-zrzidz9fz","f845253ebf432c9e990e460bbf8d6d51","fc7552c52eaee0ffc8787ad6d34a072c","75985e555769b03f5dc6e279a1155bc7","1750852072111-ojhw60q6y","f9b7b943a81ea4ba7eee39a6f7fc9669","fa3ab057f8e1f3ee3d5e34ef07b26059","d4f09e790d0a9952bcfda6d839fb50bf","1749036910052-j7dxek19b","1748976356629-5bgeyaaf1","1748973405272-q3zeztpki","999d65f7f770da796f88c8cbd3664f55","f847e3846984359dd853b3164ae2dee4","1750422829327-pz30oiqdx","1750770422364-iftjkyerp","0c8585859a567c3b2c67e877823f04e9","1750770941508-5f1wol4qg","1750770963924-f361ylu3o","7c737e9edc4b4f8df98af1cd19f6fe31","c468d847f518642666898a1c7a7d9c15","1750772552636-bxl1slj9a","1750772667419-ki0n6un0c","1748971995627-i4wduj6v0","1748971772605-2176ii4p8","a329b8732cc9083fdb55894a2d1814f7","5d3fa01a03251b27ec7c9d3683957fe1","1750416593902-e298ho4si","c669dd30c7c2f8f2bef3e71e48852bf3","cf443b86b4dcfd92f235965d83483763","1749215412677-039rqj55c","1750355588881-80dk1w9pa","1750943651026-x1h1p2uu6"],"timestamp":"2025-06-26T16:21:39.694Z","userId":1}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T16:21:39.701Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:21:39.725Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.729Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:39.783Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.797Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:21:39.832Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.839Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T16:21:39.873Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:39.896Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.901Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:39.927Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:39.931Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:39.940Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.944Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:39.978Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:39.982Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:21:40.015Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:40.018Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:40.049Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:40.056Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:40.084Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:40.087Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:40.975Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:21:40.979Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T16:21:42.286Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T16:21:48.276Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T16:21:48.314Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:21:48.414Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T16:21:48.455Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:21:48.476Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T16:21:48.490Z"}
{"level":"info","message":"POST /api/users/mark-contact-read","timestamp":"2025-06-26T16:21:50.925Z"}
{"level":"info","message":"POST /api/messages/mark-read","timestamp":"2025-06-26T16:21:50.968Z"}
{"level":"info","message":"GET /api/users/140","timestamp":"2025-06-26T16:21:51.453Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:21:51.463Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:51.467Z"}
{"level":"info","message":"GET /api/messages/conversations?userId=140","timestamp":"2025-06-26T16:21:51.505Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:51.511Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:51.521Z"}
{"level":"info","message":"GET /api/messages?conversationId=23","timestamp":"2025-06-26T16:21:51.538Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:21:51.549Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:21:51.554Z"}
{"level":"info","message":"GET /api/users/140/tags","timestamp":"2025-06-26T16:21:51.615Z"}
{"level":"info","message":"GET /api/users/140","timestamp":"2025-06-26T16:21:58.521Z"}
{"level":"info","message":"DELETE /api/users/140","timestamp":"2025-06-26T16:21:59.714Z"}
{"level":"info","message":"GET /api/dle","timestamp":"2025-06-26T16:21:59.824Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T16:22:01.677Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T16:22:01.744Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:22:01.853Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:22:01.902Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T16:22:01.911Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T16:22:01.946Z"}
{"level":"info","message":"POST /api/users/mark-contact-read","timestamp":"2025-06-26T16:22:06.098Z"}
{"level":"info","message":"POST /api/messages/mark-read","timestamp":"2025-06-26T16:22:06.183Z"}
{"level":"info","message":"GET /api/users/1","timestamp":"2025-06-26T16:22:06.246Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:22:06.259Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:22:06.265Z"}
{"level":"info","message":"GET /api/messages/conversations?userId=1","timestamp":"2025-06-26T16:22:06.313Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:22:06.332Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:22:06.336Z"}
{"level":"info","message":"GET /api/messages?conversationId=1","timestamp":"2025-06-26T16:22:06.382Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:22:06.398Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:22:06.401Z"}
{"level":"info","message":"GET /api/users/1/tags","timestamp":"2025-06-26T16:22:06.725Z"}
{"level":"info","message":"PATCH /api/users/1","timestamp":"2025-06-26T16:22:19.642Z"}
{"level":"info","message":"GET /api/users/1","timestamp":"2025-06-26T16:22:19.723Z"}
{"level":"info","message":"PATCH /api/users/1","timestamp":"2025-06-26T16:22:19.812Z"}
{"level":"info","message":"GET /api/users/1","timestamp":"2025-06-26T16:22:20.216Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T16:22:23.502Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T16:22:23.563Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:22:23.711Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:22:23.744Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T16:22:23.800Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T16:22:23.884Z"}
{"level":"info","message":"POST /api/chat/guest-message","timestamp":"2025-06-26T16:22:36.652Z"}
{"level":"info","message":"Received /guest-message request","timestamp":"2025-06-26T16:22:36.663Z"}
{"file":null,"guestId":"1750954825088-9h5stfylv","level":"info","message":"Saving guest message: Вопрос 1","mimetype":null,"size":null,"timestamp":"2025-06-26T16:22:36.665Z"}
{"level":"info","message":"Guest message saved with ID:","timestamp":"2025-06-26T16:22:36.680Z"}
{"level":"info","message":"Session saved after guest message","timestamp":"2025-06-26T16:22:36.688Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:22:39.474Z"}
{"level":"info","message":"Nonce 5eab5327579128337c459e2285907b67 сохранен для адреса 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:22:39.484Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:22:41.573Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T16:22:46.948Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:22:46.950Z"}
{"level":"info","message":"[verify] Using existing authenticated user 140 for wallet 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:22:47.002Z"}
{"level":"info","message":"[AuthService] Linking identity wallet:0xb8a6511f35a9307053436100d9ee2b0e21606fbf to user 140","timestamp":"2025-06-26T16:22:47.003Z"}
{"code":"23503","constraint":"user_identities_user_id_fkey","detail":"Key (user_id)=(140) is not present in table \"users\".","file":"ri_triggers.c","length":284,"level":"error","line":"2608","message":"[AuthService] Error linking identity wallet:0xB8A6511f35A9307053436100D9eE2B0e21606FBf to user 140: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","severity":"ERROR","stack":"error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AuthService.linkIdentity (/app/services/auth-service.js:626:7)\n    at async /app/routes/auth.js:107:7","table":"user_identities","timestamp":"2025-06-26T16:22:47.039Z"}
{"code":"23503","constraint":"user_identities_user_id_fkey","detail":"Key (user_id)=(140) is not present in table \"users\".","file":"ri_triggers.c","length":284,"level":"error","line":"2608","message":"[verify] Error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","severity":"ERROR","stack":"error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AuthService.linkIdentity (/app/services/auth-service.js:626:7)\n    at async /app/routes/auth.js:107:7","table":"user_identities","timestamp":"2025-06-26T16:22:47.040Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:23:43.458Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:24:48.814Z"}
{"level":"info","message":"Nonce dcf0c4884a4bd0f4a473043fe41cb32d сохранен для адреса 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:24:48.825Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:24:48.966Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T16:24:53.152Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:24:53.154Z"}
{"level":"info","message":"[verify] Using existing authenticated user 140 for wallet 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:24:53.183Z"}
{"level":"info","message":"[AuthService] Linking identity wallet:0xb8a6511f35a9307053436100d9ee2b0e21606fbf to user 140","timestamp":"2025-06-26T16:24:53.183Z"}
{"code":"23503","constraint":"user_identities_user_id_fkey","detail":"Key (user_id)=(140) is not present in table \"users\".","file":"ri_triggers.c","length":284,"level":"error","line":"2608","message":"[AuthService] Error linking identity wallet:0xB8A6511f35A9307053436100D9eE2B0e21606FBf to user 140: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","severity":"ERROR","stack":"error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AuthService.linkIdentity (/app/services/auth-service.js:626:7)\n    at async /app/routes/auth.js:107:7","table":"user_identities","timestamp":"2025-06-26T16:24:53.197Z"}
{"code":"23503","constraint":"user_identities_user_id_fkey","detail":"Key (user_id)=(140) is not present in table \"users\".","file":"ri_triggers.c","length":284,"level":"error","line":"2608","message":"[verify] Error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","severity":"ERROR","stack":"error: insert or update on table \"user_identities\" violates foreign key constraint \"user_identities_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AuthService.linkIdentity (/app/services/auth-service.js:626:7)\n    at async /app/routes/auth.js:107:7","table":"user_identities","timestamp":"2025-06-26T16:24:53.198Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:25:16.828Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:16.835Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:25:16.906Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:16.910Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:25:16.947Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:16.952Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:25:17.002Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:25:17.003Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T16:25:17.178Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T16:25:17.187Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:25:17.286Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:17.293Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:25:17.301Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:25:17.320Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:17.323Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:25:17.338Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T16:25:17.352Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T16:25:17.382Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:25:17.409Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:17.417Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:25:48.366Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:25:48.374Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:25:54.210Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:26:18.601Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:26:18.610Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:26:48.976Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:26:48.982Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:26:59.641Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:27:03.643Z"}
{"cookie":{"expires":"2025-07-26T16:27:03.615Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"3b78aea977f0631d7f58d94b67749b53","level":"info","message":"[SessionService] Saving session data:","timestamp":"2025-06-26T16:27:03.644Z"}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T16:27:03.652Z"}
{"level":"info","message":"POST /api/chat/guest-message","timestamp":"2025-06-26T16:27:15.389Z"}
{"level":"info","message":"Received /guest-message request","timestamp":"2025-06-26T16:27:15.390Z"}
{"file":null,"guestId":"1750955222328-i1auqmx4e","level":"info","message":"Saving guest message: вопрос 2","mimetype":null,"size":null,"timestamp":"2025-06-26T16:27:15.391Z"}
{"level":"info","message":"Guest message saved with ID:","timestamp":"2025-06-26T16:27:15.401Z"}
{"level":"info","message":"Session saved after guest message","timestamp":"2025-06-26T16:27:15.407Z"}
{"level":"info","message":"GET /api/auth/nonce?address=0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:27:18.510Z"}
{"level":"info","message":"Nonce 46ffdf553bcc3d96e5422fa86172a3ad сохранен для адреса 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:27:18.533Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:27:19.068Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:27:19.077Z"}
{"level":"info","message":"POST /api/auth/verify","timestamp":"2025-06-26T16:27:23.228Z"}
{"level":"info","message":"[verify] Verifying signature for address: 0xB8A6511f35A9307053436100D9eE2B0e21606FBf","timestamp":"2025-06-26T16:27:23.228Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:23.349Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:24.204Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:24.218Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T16:27:24.483Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:24.566Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T16:27:24.719Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:24.720Z"}
{"level":"info","message":"New user 141 role check result: user","timestamp":"2025-06-26T16:27:24.721Z"}
{"level":"info","message":"[verify] Found or created user 141 for wallet 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:24.723Z"}
{"level":"info","message":"[IdentityService] Converting guest identity for user 141 to guest_user_mapping: 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:27:24.723Z"}
{"level":"info","message":"Checking admin tokens for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:24.732Z"}
{"level":"info","message":"Checking admin role for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:24.734Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:27:24.757Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x351f59de4fedbdf7601f5592b93db3b9330c1c1d","hasTokens":false,"level":"info","message":"Token balance on polygon:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:25.057Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0x4b294265720b09ca39bfba18c7e368413c0f68eb","hasTokens":false,"level":"info","message":"Token balance on bsc:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:25.061Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xd95a45fc46a7300e6022885afec3d618d7d3f27c","hasTokens":false,"level":"info","message":"Token balance on ethereum:","minBalance":"10.000000000000000000","timestamp":"2025-06-26T16:27:25.325Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xef49261169B454f191678D2aFC5E91Ad2e85dfD8","hasTokens":false,"level":"info","message":"Token balance on sepolia:","minBalance":"50.000000000000000000","timestamp":"2025-06-26T16:27:25.328Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","balance":"0.0","contract":"0xdCe769b847a0a697239777D0B1C7dd33b6012ba0","hasTokens":false,"level":"info","message":"Token balance on arbitrum:","minBalance":"100.000000000000000000","timestamp":"2025-06-26T16:27:25.332Z"}
{"level":"info","message":"Admin role denied - no tokens found for 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:27:25.335Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T16:27:03.615Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750955222328-i1auqmx4e","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","timestamp":"2025-06-26T16:27:25.348Z","userId":141}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T16:27:25.356Z"}
{"level":"info","message":"[linkGuestMessages] Starting for user 141 with guestId=1750955222328-i1auqmx4e, previousGuestId=undefined","timestamp":"2025-06-26T16:27:25.356Z"}
{"level":"info","message":"[processGuestMessagesWrapper] Processing messages: userId=141, guestId=1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:27:25.363Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:27:25.365Z"}
{"level":"info","message":"Found 1 guest messages for guest ID 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:27:25.378Z"}
{"level":"info","message":"Created new conversation 24 for guest messages","timestamp":"2025-06-26T16:27:25.390Z"}
{"level":"info","message":"Processing guest message ID 16: вопрос 2","timestamp":"2025-06-26T16:27:25.391Z"}
{"level":"info","message":"Saved user message with ID 629","timestamp":"2025-06-26T16:27:25.405Z"}
{"level":"info","message":"Getting AI response for guest message:","timestamp":"2025-06-26T16:27:25.417Z"}
{"conversationId":24,"level":"info","message":"AI response for guest message received","timestamp":"2025-06-26T16:28:00.318Z"}
{"conversationId":24,"level":"info","message":"AI response for guest message saved","timestamp":"2025-06-26T16:28:00.441Z"}
{"level":"info","message":"Deleted 1 processed guest messages for guest ID 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:28:00.451Z"}
{"level":"info","message":"Marked guest mapping as processed for guest ID 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:28:00.460Z"}
{"address":"0xb8a6511f35a9307053436100d9ee2b0e21606fbf","authType":"wallet","authenticated":true,"cookie":{"expires":"2025-07-26T16:27:03.615Z","httpOnly":true,"originalMaxAge":2592000000,"path":"/","sameSite":"lax","secure":false},"guestId":"1750955222328-i1auqmx4e","isAdmin":false,"level":"info","message":"[SessionService] Saving session data:","processedGuestIds":["1750955222328-i1auqmx4e"],"timestamp":"2025-06-26T16:28:00.464Z","userId":141}
{"level":"info","message":"Session saved successfully","timestamp":"2025-06-26T16:28:00.470Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:28:00.494Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.499Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.534Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.541Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T16:28:00.562Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750955222328-i1auqmx4e","timestamp":"2025-06-26T16:28:00.574Z"}
{"level":"info","message":"Guest messages for guest ID 1750955222328-i1auqmx4e were already processed.","timestamp":"2025-06-26T16:28:00.578Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:28:00.618Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.623Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.643Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.646Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.666Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.669Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.691Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.695Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:28:00.717Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.719Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.738Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.741Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:00.758Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:00.760Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T16:28:02.122Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T16:28:02.218Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T16:28:02.230Z","total":2}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:28:05.172Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:19.542Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:28:19.562Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:28:21.838Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:28:21.839Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T16:28:27.532Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T16:28:27.570Z"}
{"count":2,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T16:28:27.583Z","total":2}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:31.401Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:28:31.411Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:28:56.464Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:28:56.471Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:29:01.626Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:29:01.629Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:29:13.997Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:29:31.890Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:29:31.905Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:29:54.303Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:29:54.312Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:30:02.094Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:30:02.098Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.184Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T16:30:20.185Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.186Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.187Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.188Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.189Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:30:20.189Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:30:32.383Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:30:32.391Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T16:30:32.959Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:30:34.202Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:30:34.205Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:30:35.067Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:30:54.349Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:30:54.353Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:30:59.841Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:30:59.843Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:31:25.548Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T16:31:25.549Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:31:25.549Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:31:25.550Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:31:36.463Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:31:36.467Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T16:31:38.279Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:31:43.452Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:31:43.452Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:31:54.804Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:31:54.809Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:32:30.010Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:32:30.014Z"}
{"level":"error","message":"Uncaught Exception: Not authenticated","stack":"Error: Not authenticated\n    at Connection.openBox (/app/node_modules/imap/lib/Connection.js:409:11)\n    at Connection.<anonymous> (/app/services/emailBot.js:105:19)\n    at Object.onceWrapper (node:events:638:28)\n    at Connection.emit (node:events:536:35)\n    at Connection.<anonymous> (/app/node_modules/imap/lib/Connection.js:1623:12)\n    at Connection._resTagged (/app/node_modules/imap/lib/Connection.js:1535:22)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:194:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resTagged (/app/node_modules/imap/lib/Parser.js:175:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:139:16)","timestamp":"2025-06-26T16:32:30.017Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:32:34.437Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:32:34.481Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:32:35.115Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:32:35.119Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:32:45.721Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:32:55.264Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:32:55.267Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:33:31.807Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:33:36.476Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:33:36.479Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:33:39.800Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:33:51.258Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:33:55.711Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:33:55.714Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:34:37.245Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:34:37.835Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:34:37.841Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:34:41.458Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:34:56.165Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:34:56.168Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:34:56.665Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:35:39.382Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:35:39.386Z"}
{"level":"info","message":"[IdentityService] No user found with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:35:42.889Z"}
{"level":"info","message":"[IdentityService] Saving identity for user 142: email:no-reply@slack.com","timestamp":"2025-06-26T16:35:42.892Z"}
{"level":"info","message":"[IdentityService] Created new identity email:no-reply@slack.com for user 142","timestamp":"2025-06-26T16:35:42.898Z"}
{"level":"info","message":"[WS] broadcastContactsUpdate after new user created","timestamp":"2025-06-26T16:35:42.899Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:35:42.899Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:35:42.901Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:35:42.901Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:35:42.932Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:35:47.123Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:35:47.124Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:35:47.125Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:35:47.125Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:35:54.109Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:35:54.116Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:36:05.853Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:36:05.853Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:36:05.856Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:36:05.857Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:36:40.650Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:36:40.657Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:36:52.773Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:36:52.773Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:36:52.776Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:36:52.776Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.795Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.796Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.798Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.798Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.799Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.799Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.799Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.800Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.800Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.800Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.800Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.801Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.801Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:36:52.801Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:36:52.849Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:36:52.850Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:36:52.852Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:36:52.854Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:36:54.353Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:36:54.357Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:37:12.162Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:37:41.989Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:37:41.996Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:37:54.000Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:37:54.001Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:37:54.003Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:37:54.004Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:37:54.078Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:37:54.079Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:37:54.082Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:37:54.082Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:37:54.800Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:37:54.812Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:37:58.153Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:37:58.153Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:37:58.155Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:37:58.156Z"}
{"level":"info","message":"[IdentityService] Found user 142 with identity email:no-reply@slack.com","timestamp":"2025-06-26T16:38:13.221Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 142 (Type: number)","timestamp":"2025-06-26T16:38:13.222Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 142:","timestamp":"2025-06-26T16:38:13.229Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 142","timestamp":"2025-06-26T16:38:13.229Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:38:43.363Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:38:43.370Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:38:55.281Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:38:55.288Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:39:00.757Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:39:00.760Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:39:03.693Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:39:03.695Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:39:03.695Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:39:03.696Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:39:03.697Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:39:22.309Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:39:22.356Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:39:22.404Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T16:39:29.031Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T16:39:29.046Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":640,"timestamp":"2025-06-26T16:39:29.075Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"вопрос 3\"","timestamp":"2025-06-26T16:39:29.099Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:39:30.442Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:39:30.446Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:39:55.756Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:39:55.807Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:40:01.209Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:40:01.212Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:40:04.551Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:40:08.822Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:40:23.986Z"}
{"level":"info","message":"Email sent to no-reply@slack.com","timestamp":"2025-06-26T16:40:35.227Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:40:35.307Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:40:43.077Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:40:43.080Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:40:56.182Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:40:56.192Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:41:00.812Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:00.843Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:00.905Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:00.915Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T16:41:00.942Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750956058232-czqmn1pc0","timestamp":"2025-06-26T16:41:00.943Z"}
{"level":"info","message":"Created mapping for guest ID 1750956058232-czqmn1pc0 to user 141","timestamp":"2025-06-26T16:41:00.958Z"}
{"level":"info","message":"No guest messages found for guest ID 1750956058232-czqmn1pc0","timestamp":"2025-06-26T16:41:00.964Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750956058232-czqmn1pc0","timestamp":"2025-06-26T16:41:00.976Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:41:01.002Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:41:01.003Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:41:01.012Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:01.048Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:01.076Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:01.082Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:01.103Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:01.109Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:01.134Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:01.136Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T16:41:02.381Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T16:41:02.414Z"}
{"count":3,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T16:41:02.427Z","total":3}
{"level":"info","message":"Email sent to no-reply@slack.com","timestamp":"2025-06-26T16:41:08.445Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:41:08.470Z"}
{"level":"info","message":"[IdentityService] No user found with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:10.154Z"}
{"level":"info","message":"[IdentityService] Saving identity for user 143: email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:10.158Z"}
{"level":"info","message":"[IdentityService] No user found with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:10.164Z"}
{"level":"info","message":"[IdentityService] Created new identity email:mailer-daemon@smtp.hostland.ru for user 143","timestamp":"2025-06-26T16:41:10.166Z"}
{"level":"info","message":"[WS] broadcastContactsUpdate after new user created","timestamp":"2025-06-26T16:41:10.166Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:41:10.167Z"}
{"level":"info","message":"[IdentityService] Saving identity for user 144: email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:10.169Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:41:10.171Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:41:10.171Z"}
{"level":"warn","message":"[IdentityService] Identity email:mailer-daemon@smtp.hostland.ru already belongs to user 143, not user 144","timestamp":"2025-06-26T16:41:10.172Z"}
{"level":"info","message":"[WS] broadcastContactsUpdate after new user created","timestamp":"2025-06-26T16:41:10.172Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 144 (Type: number)","timestamp":"2025-06-26T16:41:10.173Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 144:","timestamp":"2025-06-26T16:41:10.180Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 144","timestamp":"2025-06-26T16:41:10.180Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:41:10.206Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:41:10.259Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:14.350Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:41:14.353Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:41:14.355Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:41:14.355Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:14.392Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:41:14.392Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:41:14.396Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:41:14.396Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:31.909Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:41:31.915Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:33.053Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:41:33.054Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:41:33.056Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:41:33.056Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:41:33.080Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:41:33.080Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:41:33.082Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:41:33.082Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:41:47.607Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:41:47.613Z"}
{"level":"info","message":"Email sent to no-reply@slack.com","timestamp":"2025-06-26T16:41:52.208Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:41:52.227Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:42:02.106Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:42:02.109Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:42:17.706Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:42:17.711Z"}
{"level":"error","message":"Uncaught Exception: Cannot read properties of undefined (reading 'cbargs')","stack":"TypeError: Cannot read properties of undefined (reading 'cbargs')\n    at Connection._resUntagged (/app/node_modules/imap/lib/Connection.js:1253:20)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:191:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resUntagged (/app/node_modules/imap/lib/Parser.js:271:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:137:16)\n    at Parser._tryread (/app/node_modules/imap/lib/Parser.js:82:15)\n    at Parser._cbReadable (/app/node_modules/imap/lib/Parser.js:53:12)\n    at TLSSocket.emit (node:events:524:28)\n    at emitReadable_ (node:internal/streams/readable:834:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2025-06-26T16:42:19.123Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:42:19.748Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:42:32.357Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:42:32.366Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:42:34.711Z"}
{"level":"info","message":"Email sent to no-reply@slack.com","timestamp":"2025-06-26T16:42:39.904Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:42:39.924Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:42:47.915Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:42:47.919Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:42:59.858Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:42:59.865Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:43:21.020Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:43:21.020Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:43:21.022Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:43:21.023Z"}
{"level":"info","message":"[IdentityService] Found user 143 with identity email:mailer-daemon@smtp.hostland.ru","timestamp":"2025-06-26T16:43:25.313Z"}
{"level":"info","message":"[getLinkedWallet] Called with userId: 143 (Type: number)","timestamp":"2025-06-26T16:43:25.314Z"}
{"level":"info","message":"[getLinkedWallet] DB query result for userId 143:","timestamp":"2025-06-26T16:43:25.316Z"}
{"level":"info","message":"[getLinkedWallet] Returning address: undefined for userId 143","timestamp":"2025-06-26T16:43:25.316Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:43:30.073Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:43:30.077Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:43:43.969Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:43:49.310Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:43:49.316Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:44:00.313Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:44:00.320Z"}
{"level":"info","message":"Email sent to no-reply@slack.com","timestamp":"2025-06-26T16:44:03.351Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:44:03.550Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T16:44:18.042Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T16:44:18.061Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T16:44:18.067Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T16:44:18.073Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T16:44:18.074Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T16:44:18.075Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T16:44:18.195Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T16:44:18.221Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T16:44:18.287Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T16:44:18.291Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:44:18.911Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:44:18.914Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:44:24.127Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T16:44:24.129Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:44:24.130Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T16:44:26.175Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T16:44:26.179Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T16:44:26.180Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T16:44:26.182Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T16:44:26.184Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T16:44:26.187Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T16:44:26.256Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T16:44:26.278Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T16:44:26.348Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T16:44:26.350Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:44:27.037Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:44:27.040Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:44:31.370Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:44:47.350Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:44:47.355Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:44:52.004Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:44:52.010Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:45:15.250Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:15.254Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:45:17.624Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.626Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:45:17.676Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.687Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:45:17.714Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.721Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T16:45:17.754Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750956314609-v8t5u5j9d","timestamp":"2025-06-26T16:45:17.756Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:45:17.766Z"}
{"level":"info","message":"Created mapping for guest ID 1750956314609-v8t5u5j9d to user 141","timestamp":"2025-06-26T16:45:17.768Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.770Z"}
{"level":"info","message":"No guest messages found for guest ID 1750956314609-v8t5u5j9d","timestamp":"2025-06-26T16:45:17.774Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750956314609-v8t5u5j9d","timestamp":"2025-06-26T16:45:17.779Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:45:17.788Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:45:17.790Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:45:17.797Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.823Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:45:17.857Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:45:17.860Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T16:45:19.192Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T16:45:19.210Z"}
{"count":3,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T16:45:19.218Z","total":3}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:45:33.096Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T16:47:01.385Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T16:47:01.388Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T16:47:01.388Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T16:47:01.390Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T16:47:01.390Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T16:47:01.391Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T16:47:01.436Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T16:47:01.447Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T16:47:01.508Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T16:47:01.509Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:47:03.023Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.037Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:03.070Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.074Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:47:03.097Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.105Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:03.125Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T16:47:03.144Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750956420612-caz6v21eh","timestamp":"2025-06-26T16:47:03.146Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.149Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:47:03.165Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T16:47:03.166Z"}
{"level":"info","message":"Created mapping for guest ID 1750956420612-caz6v21eh to user 141","timestamp":"2025-06-26T16:47:03.168Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:03.175Z"}
{"level":"info","message":"No guest messages found for guest ID 1750956420612-caz6v21eh","timestamp":"2025-06-26T16:47:03.177Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.178Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750956420612-caz6v21eh","timestamp":"2025-06-26T16:47:03.199Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:03.219Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:03.223Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T16:47:04.647Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T16:47:04.673Z"}
{"count":3,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T16:47:04.681Z","total":3}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:47:05.765Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:47:05.767Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:47:06.388Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T16:47:12.376Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T16:47:12.378Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":654,"timestamp":"2025-06-26T16:47:12.391Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"Вопрос 1\", threshold=0.8","timestamp":"2025-06-26T16:47:12.405Z"}
{"level":"error","message":"Error getting or saving AI response (RAG): Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory","stack":"Error: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: libnode.so.109: cannot open shared object file: No such file or directory\n    at HNSWLib.imports (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:304:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async HNSWLib.getHierarchicalNSW (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:87:37)\n    at async HNSWLib.initIndex (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:101:26)\n    at async HNSWLib.addVectors (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:128:9)\n    at async HNSWLib.fromDocuments (/app/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs:294:9)\n    at async ragAnswer (/app/services/ragService.js:109:23)\n    at async /app/routes/chat.js:455:29","timestamp":"2025-06-26T16:47:14.505Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:33.717Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:47:33.722Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:47:52.056Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:47:52.060Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:48:03.930Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:48:03.932Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:48:17.179Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T16:48:17.179Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:48:17.180Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:48:17.180Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T16:48:27.181Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:48:34.180Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:48:34.184Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:48:35.083Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T16:48:35.084Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T16:48:45.086Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T16:48:49.289Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T16:48:49.290Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:48:49.918Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:48:53.449Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:48:53.452Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:49:04.386Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:49:04.388Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:49:21.016Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:49:31.910Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:49:31.914Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:49:54.805Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:49:54.810Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:49:55.358Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:50:02.113Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:50:02.116Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:50:22.741Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:50:32.352Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:50:32.356Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:50:55.255Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:50:55.260Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.409Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.410Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.410Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.410Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.411Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:51:05.411Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:51:26.506Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:51:31.218Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:51:35.066Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:51:35.069Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:51:55.700Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:51:55.704Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:52:09.862Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:35.088Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:52:35.090Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:52:38.293Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:52:38.293Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:52:38.294Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:52.921Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:52.925Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:52:53.496Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.498Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:53.564Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.567Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T16:52:53.590Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.597Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:53.621Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.623Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:52:53.632Z"}
{"level":"info","message":"Fetching token balances for address: 0xf45aa4917b3775ba37f48aeb3dc1a943561e9e0b","timestamp":"2025-06-26T16:52:53.634Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:53.652Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.654Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:52:53.680Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:52:53.682Z"}
{"level":"info","message":"GET /api/users/read-contacts-status","timestamp":"2025-06-26T16:52:53.988Z"}
{"level":"info","message":"GET /api/tags","timestamp":"2025-06-26T16:52:54.033Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:52:54.136Z"}
{"level":"info","message":"GET /api/users","timestamp":"2025-06-26T16:52:54.165Z"}
{"level":"info","message":"GET /api/messages/read-status","timestamp":"2025-06-26T16:52:54.173Z"}
{"level":"info","message":"GET /api/messages","timestamp":"2025-06-26T16:52:54.200Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:53:14.964Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:53:15.009Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:53:21.814Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:53:21.818Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:53:36.447Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:53:36.450Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:53:42.717Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:53:52.023Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:53:52.026Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:54:20.886Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:54:22.271Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:54:22.274Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:54:37.870Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:54:37.873Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:54:44.613Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:54:52.501Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:54:52.505Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:55:22.722Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:55:22.727Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:55:26.943Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:55:39.201Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:55:39.204Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:55:50.013Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:55:52.955Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:55:52.958Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.655Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.657Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.657Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.657Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.658Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.658Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:56:32.658Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:56:38.079Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:56:38.082Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:56:55.254Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:56:55.259Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:56:55.552Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:56:55.598Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:57:39.247Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:57:39.255Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:57:42.137Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T16:57:42.138Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:57:55.701Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:57:55.706Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:58:00.885Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:58:00.917Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:58:39.010Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:58:40.584Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:58:40.589Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:58:56.150Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:58:56.153Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:59:06.338Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:59:41.954Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T16:59:41.957Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T16:59:44.455Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T16:59:53.874Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T16:59:53.877Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T17:00:24.028Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T17:00:24.032Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T17:00:24.032Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T17:00:24.033Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T17:00:24.034Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T17:00:24.035Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T17:00:24.081Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T17:00:24.107Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T17:00:24.149Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T17:00:24.150Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T17:00:25.365Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.373Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:25.422Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.428Z"}
{"level":"info","message":"GET /api/auth/check","timestamp":"2025-06-26T17:00:25.455Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.460Z"}
{"level":"info","message":"POST /api/chat/process-guest","timestamp":"2025-06-26T17:00:25.478Z"}
{"level":"info","message":"Processing guest messages for user 141 with guest ID 1750957224536-fwx762lqx","timestamp":"2025-06-26T17:00:25.481Z"}
{"level":"info","message":"Created mapping for guest ID 1750957224536-fwx762lqx to user 141","timestamp":"2025-06-26T17:00:25.492Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:25.496Z"}
{"level":"info","message":"No guest messages found for guest ID 1750957224536-fwx762lqx","timestamp":"2025-06-26T17:00:25.499Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.502Z"}
{"level":"info","message":"Marked guest mapping as processed (no messages found) for guest ID 1750957224536-fwx762lqx","timestamp":"2025-06-26T17:00:25.506Z"}
{"level":"info","message":"GET /api/tokens/balances?address=0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T17:00:25.520Z"}
{"level":"info","message":"Fetching token balances for address: 0xb8a6511f35a9307053436100d9ee2b0e21606fbf","timestamp":"2025-06-26T17:00:25.521Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:25.524Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.527Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:25.560Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:25.563Z"}
{"level":"info","message":"GET /api/chat/history?count_only=true","timestamp":"2025-06-26T17:00:27.748Z"}
{"level":"info","message":"GET /api/chat/history?offset=0&limit=30","timestamp":"2025-06-26T17:00:27.180Z"}
{"count":4,"level":"info","limit":30,"message":"Returning message history for user 141","offset":0,"timestamp":"2025-06-26T17:00:27.186Z","total":4}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:00:31.059Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:00:31.061Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:00:31.731Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T17:00:38.596Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T17:00:38.598Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":655,"timestamp":"2025-06-26T17:00:38.609Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"вопрос 2\", threshold=0.8","timestamp":"2025-06-26T17:00:38.618Z"}
{"level":"info","message":"[RAG] Результат поиска по RAG:","timestamp":"2025-06-26T17:00:41.749Z"}
{"level":"info","message":"[RAG] Нет confident-ответа (score=undefined), переходим к генерации через LLM.","timestamp":"2025-06-26T17:00:41.750Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:54.506Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:00:54.524Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:00:56.159Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:00:56.165Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:01:26.408Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:01:26.413Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:01:37.157Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:01:54.798Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:01:54.802Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:01:56.612Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:01:56.615Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:02:26.853Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:02:26.857Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:02:46.179Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:02:55.369Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:02:55.372Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:02:57.059Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:02:57.062Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:03:27.318Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:03:27.321Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:03:48.072Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:03:55.705Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:03:55.709Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:04:53.439Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:04:56.152Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:04:56.155Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:04:56.157Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:04:56.161Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:05:53.889Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:05:53.892Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:05:53.894Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:05:53.896Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:05:59.014Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:06:54.373Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:06:54.375Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:06:54.377Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:06:54.379Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:07:08.137Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:07:54.826Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:07:54.828Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:07:54.829Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:07:54.832Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.469Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.470Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.470Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.470Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:08:14.470Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T17:08:24.479Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:08:28.748Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:08:28.749Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:08:33.077Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:08:55.309Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:08:55.313Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:08:55.315Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:08:55.317Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:09:15.265Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:09:34.819Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:09:55.715Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:09:55.719Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:09:55.725Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:09:55.728Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:25.387Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T17:10:25.387Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:25.388Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:25.389Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:25.389Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:25.389Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T17:10:35.394Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:40.616Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:10:40.617Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:10:56.146Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:10:56.148Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:10:56.149Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:10:56.151Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:11:29.878Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:11:29.879Z"}
{"level":"error","message":"Uncaught Exception: Not authenticated","stack":"Error: Not authenticated\n    at Connection.openBox (/app/node_modules/imap/lib/Connection.js:409:11)\n    at Connection.<anonymous> (/app/services/emailBot.js:105:19)\n    at Object.onceWrapper (node:events:638:28)\n    at Connection.emit (node:events:536:35)\n    at Connection.<anonymous> (/app/node_modules/imap/lib/Connection.js:1623:12)\n    at Connection._resTagged (/app/node_modules/imap/lib/Connection.js:1535:22)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:194:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resTagged (/app/node_modules/imap/lib/Parser.js:175:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:139:16)","timestamp":"2025-06-26T17:11:29.885Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:11:34.290Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:11:34.335Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:11:45.630Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:11:53.866Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:11:53.870Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:11:53.871Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:11:53.874Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:12:31.647Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:12:39.628Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:12:51.206Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:12:54.394Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:12:54.396Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:12:54.397Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:12:54.400Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:13:37.156Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:13:45.038Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:13:54.790Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:13:54.794Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:13:54.796Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:13:54.798Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.273Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:14:01.274Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:14:42.702Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:14:42.753Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:14:46.893Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:14:55.257Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:14:55.260Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:14:55.262Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:14:55.264Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:15:02.180Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:15:48.024Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:15:55.705Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:15:55.707Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:15:55.710Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:15:55.713Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:15:56.035Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:16:07.562Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:16:53.543Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:16:56.244Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:16:56.246Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:16:56.248Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:16:56.249Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:16:57.788Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.628Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.628Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.629Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:17:17.630Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:17:53.890Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:17:53.893Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:17:53.895Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:17:53.897Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:17:58.984Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:17:59.022Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:18:06.936Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:18:22.201Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:18:54.326Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:18:54.329Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:18:54.331Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:18:54.333Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:19:01.123Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:19:05.445Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:19:20.288Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:19:20.299Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:19:25.337Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:19:27.736Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:19:27.738Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:19:54.778Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:19:54.781Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:19:56.588Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:19:56.590Z"}
{"level":"error","message":"Uncaught Exception: Cannot read properties of undefined (reading 'type')","stack":"TypeError: Cannot read properties of undefined (reading 'type')\n    at Connection._resUntagged (/app/node_modules/imap/lib/Connection.js:1265:52)\n    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:191:10)\n    at Parser.emit (node:events:524:28)\n    at Parser._resUntagged (/app/node_modules/imap/lib/Parser.js:271:10)\n    at Parser._parse (/app/node_modules/imap/lib/Parser.js:137:16)\n    at Parser._tryread (/app/node_modules/imap/lib/Parser.js:82:15)\n    at Parser._cbReadable (/app/node_modules/imap/lib/Parser.js:53:12)\n    at TLSSocket.emit (node:events:524:28)\n    at emitReadable_ (node:internal/streams/readable:834:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2025-06-26T17:20:13.530Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.702Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.703Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.703Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.703Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.703Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.703Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.704Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:18.704Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:20:37.948Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:20:55.245Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:20:55.248Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:20:55.250Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:20:55.252Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:21:15.486Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:21:15.530Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:21:15.577Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:21:19.503Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:21:34.869Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:21:55.679Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:21:55.681Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:21:55.683Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:21:55.685Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:22:20.859Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:29.604Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:29.605Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:29.605Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:29.605Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:29.606Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:22:44.952Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T17:22:56.726Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T17:22:56.738Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T17:22:56.739Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T17:22:56.741Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T17:22:56.741Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T17:22:56.742Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T17:22:56.851Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T17:22:56.863Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T17:22:56.916Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T17:22:56.918Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:23:02.165Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T17:23:02.165Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T17:23:12.173Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:23:16.016Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:23:16.023Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:23:17.376Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T17:23:17.377Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T17:23:21.115Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T17:23:21.118Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":657,"timestamp":"2025-06-26T17:23:21.143Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"вопрос 1\", threshold=0.8","timestamp":"2025-06-26T17:23:21.153Z"}
{"level":"info","message":"[RAG] Результат поиска по RAG:","timestamp":"2025-06-26T17:23:26.339Z"}
{"level":"info","message":"[RAG] Нет confident-ответа (score=undefined), переходим к генерации через LLM.","timestamp":"2025-06-26T17:23:26.339Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:23:28.190Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:23:28.193Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T17:23:30.110Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:23:34.324Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:23:34.326Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:23:34.884Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:23:53.862Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:23:53.866Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:23:58.415Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:23:58.418Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:24:25.935Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:24:25.939Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:24:45.013Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:24:45.014Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:24:45.015Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:24:54.324Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:24:54.328Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:25:27.303Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:25:27.307Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:25:49.579Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:25:49.621Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T17:25:52.250Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T17:25:52.263Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T17:25:52.264Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T17:25:52.267Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T17:25:52.267Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T17:25:52.269Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T17:25:52.390Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T17:25:52.413Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T17:25:52.500Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T17:25:52.502Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:25:54.816Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:25:54.826Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:25:56.763Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:25:56.766Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:26:00.391Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:26:00.396Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:26:01.990Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T17:26:01.990Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:26:01.991Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T17:26:06.068Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T17:26:06.071Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":659,"timestamp":"2025-06-26T17:26:06.091Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"вопрос 3\", threshold=0.8","timestamp":"2025-06-26T17:26:06.099Z"}
{"level":"info","message":"[RAG] Результат поиска по RAG:","timestamp":"2025-06-26T17:26:12.866Z"}
{"level":"info","message":"[RAG] Нет confident-ответа (score=undefined), переходим к генерации через LLM.","timestamp":"2025-06-26T17:26:12.867Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T17:26:14.725Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:26:15.268Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:26:15.270Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:26:15.924Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:26:26.976Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:26:26.981Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:26:55.235Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:26:55.240Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:26:57.042Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:26:57.044Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:27:02.876Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:27:27.294Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:27:27.298Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:27:29.952Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:27:55.703Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:27:55.708Z"}
{"level":"info","message":"Директория существует: /app/contracts-data","timestamp":"2025-06-26T17:28:00.059Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data","timestamp":"2025-06-26T17:28:00.071Z"}
{"level":"info","message":"Директория существует: /app/contracts-data/dles","timestamp":"2025-06-26T17:28:00.073Z"}
{"level":"info","message":"Директория доступна для записи: /app/contracts-data/dles","timestamp":"2025-06-26T17:28:00.075Z"}
{"level":"info","message":"Директория существует: /app/temp","timestamp":"2025-06-26T17:28:00.075Z"}
{"level":"info","message":"Директория доступна для записи: /app/temp","timestamp":"2025-06-26T17:28:00.076Z"}
{"level":"info","message":"Ethers version: 6.13.5","timestamp":"2025-06-26T17:28:00.178Z"}
{"level":"info","message":"[EmailBot] start() called","timestamp":"2025-06-26T17:28:00.192Z"}
{"connTimeout":30000,"host":"mail.hostland.ru","keepalive":{"forceNoop":true,"idleInterval":300000,"interval":10000},"level":"info","message":"[EmailBot] IMAP config:","password":"***","port":993,"timestamp":"2025-06-26T17:28:00.237Z","tls":true,"tlsOptions":{"rejectUnauthorized":false},"user":"info@hb3-accelerator.com"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 1","timestamp":"2025-06-26T17:28:00.238Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:28:04.461Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:28:04.464Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:28:05.059Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:28:25.388Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:28:25.396Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:28:27.344Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:28:27.347Z"}
{"level":"info","message":"POST /api/chat/message","timestamp":"2025-06-26T17:28:30.401Z"}
{"level":"info","message":"Received /message request","timestamp":"2025-06-26T17:28:30.404Z"}
{"conversationId":24,"level":"info","message":"User message saved","messageId":661,"timestamp":"2025-06-26T17:28:30.419Z"}
{"level":"info","message":"[RAG] Запуск поиска по RAG: tableId=28, вопрос=\"вопрос 1\", threshold=0.3","timestamp":"2025-06-26T17:28:30.428Z"}
{"level":"info","message":"[RAG] Результат поиска по RAG:","timestamp":"2025-06-26T17:28:34.116Z"}
{"level":"info","message":"[RAG] Нет confident-ответа (score=undefined), переходим к генерации через LLM.","timestamp":"2025-06-26T17:28:34.119Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:28:56.227Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:28:56.241Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:28:57.973Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:28:57.974Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:29:15.105Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 2)...","timestamp":"2025-06-26T17:29:15.106Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:29:15.106Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:29:15.107Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 2","timestamp":"2025-06-26T17:29:27.839Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:29:28.194Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:29:28.197Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:29:28.438Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:29:28.439Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:29:29.119Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:29:53.871Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:29:53.877Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:29:58.427Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:29:58.429Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:30:16.067Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:30:34.510Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:30:54.346Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:30:54.350Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:30:54.689Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:30:54.693Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:31:25.117Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:31:40.024Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:31:54.774Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:31:54.777Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:31:54.779Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:31:54.781Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:32:30.502Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:32:49.421Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:32:55.137Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:32:55.142Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:32:55.146Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:32:55.150Z"}
{"level":"error","message":"[EmailBot] IMAP connection error: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.143Z"}
{"level":"warn","message":"[EmailBot] IMAP reconnecting in 10 seconds (attempt 3)...","timestamp":"2025-06-26T17:33:40.144Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.144Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.144Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.145Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.145Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.145Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.146Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.146Z"}
{"level":"error","message":"IMAP connection error during check: Timed out while authenticating with server","timestamp":"2025-06-26T17:33:40.146Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:33:50.918Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:33:50.955Z"}
{"level":"info","message":"[EmailBot] IMAP connect attempt 3","timestamp":"2025-06-26T17:33:51.064Z"}
{"level":"info","message":"[EmailBot] IMAP connection ready","timestamp":"2025-06-26T17:33:55.248Z"}
{"level":"info","message":"[EmailBot] Email bot started and IMAP connection initiated","timestamp":"2025-06-26T17:33:55.250Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:33:55.685Z"}
{"level":"info","message":"GET /api/auth/identities","timestamp":"2025-06-26T17:33:55.688Z"}
{"level":"info","message":"[IdentityService] Found 1 identities for user 141","timestamp":"2025-06-26T17:33:55.690Z"}
{"level":"info","message":"[IdentityService] Found 3 identities for user 1","timestamp":"2025-06-26T17:33:55.692Z"}
{"level":"info","message":"No new messages found","timestamp":"2025-06-26T17:33:55.857Z"}
